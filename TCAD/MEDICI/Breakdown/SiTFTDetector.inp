TITLE		Si Dual-Gate TFT Detector

COMMENT		Simulation Settings
COMMENT		Potential Extraction Mode (ON:1, OFF:0)
ASSIGN		NAME=PEXT N.VAL=0

COMMENT		Use TRAPS? (ON:1, OFF:0)
ASSIGN		NAME=USTRP N.VAL=1

COMMENT		Plot Band Diagrams? (ON:1, OFF:0)
ASSIGN		NAME=PLTBAND N.VAL=1

COMMENT		Setting up Bias Condition
ASSIGN		NAME=BGATE N.VAL=19
ASSIGN		NAME=BDRAIN N.VAL=19
ASSIGN		NAME=BBACK N.VAL=19

CALL		FILE=./SiTFTDetectorMesh.inp
PLOT.2D	BOUNDARY REGION JUNCTION FILL LABELS CLEAR
+		TITLE="Si TFT Detector"

COMMENT		Specify Electrode Characteristics
CONTACT		NUM=1 ALUMINUM
CONTACT		NUM=2 WORKFUNC=4.5

COMMENT		Specify Optical Parameters
MATERIAL	A-SILICON EG300=@EGaSI
MATERIAL	SILICON EG300=@EGSI

COMMENT	Calculate characteristic for holes/electron
ASSIGN	NAME=PCHR N.VAL=(-0.25-@EV)*LOG(1E20/8E13) PRINT
COMMENT	Generate hole traps.
TRAP	DISTR N.TOT="-(8E13+1E20*EXP(-(@FENER-@EV)/@PCHR))"
+		COND="(@FENER<0)&(Y>0.400)&(Y<0.450)" PRINT
+		X.PLOT=0.38 Y.PLOT=4 OUT.FILE=HOLETRAP.IVL
+		TAUN="1E-5" TAUP="1E-6"
ASSIGN	NAME=NCHR N.VAL=(@EC-0.4)*LOG(1E17/1E13) PRINT
COMMENT	Generate electron traps.
TRAP	DISTR N.TOT="(1E13+1E17*EXP((@FENER-@EC)/@NCHR))"
+		COND="(@FENER>0)&(Y>0.400)&(Y<0.450)" PRINT
+		X.PLOT=0.38 Y.PLOT=4 OUT.FILE=ELECTRAP.IVL
+		TAUN="1E-5" TAUP="1E-6"

COMMENT		Solving initial conditions
MODELS		CONSRH AUGER BGN
SYMB		GUMM CARR=0
SOLVE     	V1=0.0 OUT.FILE="SiTFT.INI"
SYMB		NEWT CARR=2
METHOD		N.DAMP 

COMMENT	Dark Current Evaluation
COMMENT	Electrodes
+		1: Gate, 2: Bottom Electrode, 3: Source, 4: Drain
LOG		OUT.FILE="SiTFTtrans.IVL" 

SOLVE
SOLVE	V4=0.0 VSTEP=0.1 NSTEP=5 ELEC=4
SOLVE	V4=1 VSTEP=1 NSTEP=@BDRAIN ELEC=4

SOLVE	V2=0.0 VSTEP=0.1 NSTEP=5 ELEC=2
SOLVE	V2=1 VSTEP=1 NSTEP=@BBACK ELEC=2

SOLVE	V1=0.0 VSTEP=0.1 NSTEP=5 ELEC=1
SOLVE	V1=1 VSTEP=1 NSTEP=@BGATE ELEC=1

LOG		CLOSE

COMMENT	Transfer Characteristic (Dark)
PLOT.1D	IN.FILE="SiTFTtrans.IVL" X.AX=V1 Y.AX=I4
+		POINTS PRINT
+		TITLE="Transfer Characteristic (Dark)"
+		OUT.FILE="SiTFTTRNSDK.dat"

COMMENT Calculating Drain Characteristics
LOG		OUT.FILE="SiTFTout.IVL"

SOLVE	V1=0.0
SOLVE	V1=0.1 VSTEP=0.1 NSTEP=9 ELEC=1
SOLVE	V1=1.0 VSTEP=1 NSTEP=9 ELEC=1
SOLVE	V4=0.0 VSTEP=0.1 NSTEP=9 ELEC=4
SOLVE	V4=1.0 VSTEP=1 NSTEP=30 ELEC=4

LOG		CLOSE

COMMENT Output Characteristic (Dark)
PLOT.1D	IN.FILE="SiTFTout.IVL" X.AX=V4 Y.AX=I4
+		POINTS PRINT
+		TITLE="Output Characteristic (Dark)"
*		OUT.FILE="SiTFTOUTDK.dat"

COMMENT		2D Plots for device estimation
PLOT.2D		BOUNDARY REGION JUNCTION LABELS FILL DEPLETION
+			TITLE="Potential"
CONTOUR		POTENTIAL
$$PLOT.2D		BOUNDARY REGION	JUNCTION LABELS FILL DEPLETION
$$+			TITLE="Electric Field"
$$CONTOUR		E-FIELD
	

	
END
